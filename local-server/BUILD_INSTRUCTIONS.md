# Инструкция по сборке исполняемого файла локального агента

## Подготовка окружения

1. Установите Python 3.8 или новее: https://www.python.org/downloads/
2. Установите необходимые зависимости:
   ```
   pip install pyinstaller
   pip install getmac
   pip install cryptography
   ```

## Сборка исполняемого файла

### Вариант 1: Быстрая сборка

Откройте командную строку или PowerShell в директории `local-server` и выполните:

```
pyinstaller --onefile --icon=nuvio.ico --add-data "index.html;." --add-data "nuvio.ico;." local_agent.py
```

### Вариант 2: Сборка с использованием spec-файла (рекомендуется)

1. Откройте командную строку или PowerShell в директории `local-server`
2. Выполните команду:
   ```
   pyinstaller local_agent_build.spec
   ```

В результате исполняемый файл будет создан в папке `dist`.

## Создание архива для распространения

1. Создайте новую директорию, например, `Nuvio-Agent`
2. Скопируйте в неё следующие файлы:
   - `dist/local_agent.exe` - исполняемый файл
   - `index.html` - веб-интерфейс
   - `nuvio.ico` - иконка приложения
   - `README.txt` - инструкция для пользователя
   - `start_agent.bat` - вспомогательный файл для запуска

3. Заархивируйте директорию `Nuvio-Agent` в ZIP-архив с именем `Local-agent-Nuvio.zip`

## Тестирование собранного приложения

1. Распакуйте созданный архив в отдельную директорию
2. Запустите `start_agent.bat` или напрямую `local_agent.exe`
3. Проверьте, что браузер автоматически открывается со страницей токена
4. Проверьте подключение в веб-приложении Nuvio

## Возможные проблемы при сборке

### Ошибка "FileNotFoundError: [Errno 2] No such file or directory: 'index.html'"

Убедитесь, что файл `index.html` находится в той же директории, где выполняется сборка.

### Ошибка "PermissionError: [WinError 5] Отказано в доступе"

Убедитесь, что исполняемый файл не запущен в данный момент, и закройте все связанные процессы.

### Большой размер исполняемого файла

Это нормально для Python-приложений, собранных с помощью PyInstaller.

### Антивирус блокирует исполняемый файл

Добавьте исключение в антивирусе или используйте официальную подпись кода. 